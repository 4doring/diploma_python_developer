## Дипломный проект профессии «Python-разработчик: расширенный курс»


**Сервис заказа товаров для розничных сетей реализованный на Django с использованием Django REST Framework**


### Цель дипломного проекта

Реализовать cервис REST API позволяющий:
- покупателям регистрироваться, просматривать каталог товаров от разных поставщиков, формировать корзину и оформлять заказы
- поставщикам загружать прайс-листы и управлять статусами заказов
- автоматически отправлять email-уведомления при подтверждении заказа

### Выполнены следующие этапы разработки backend

1. Создание и настройка проекта
2. Проработка моделей данных
3. Реализация импорта товаров
4. Реализация API views
5. Полностью готовый backend

### Проект удовлетворяет следующим критериям

- Работоспособный проект в репозитории GitHub
- Документация по запуску (Windows/Linux)
- Выполненна базовая часть проекта
- Наличие собственных комментариев к коду
- Использование сторонних библиотек и фреймворков (DRF, PyYAML, psycopg2 и др.)
- Полностью работающие API endpoints

## Функциональность

### Для покупателей
-  Регистрация с подтверждением по email  
-  Авторизация по email и паролю  
-  Восстановление пароля  
-  Просмотр каталога товаров от нескольких магазинов  
-  Добавление/удаление товаров в корзину  
-  Управление контактами (адресами доставки)  
-  Подтверждение заказа с привязкой к адресу  
-  Получение email с подтверждением заказа  
-  Просмотр списка заказов и деталей каждого заказа  

### Для поставщиков
-  Регистрация как магазин 
-  Загрузка прайс-листа по URL в формате YAML/JSON 
-  Просмотр своих заказов  
-  Изменение статуса заказа

### Административные функции
-  Отправка накладной администратору при подтверждении заказа  
-  Отправка подтверждения покупателю  

## Используемые технологии
- **Python 3.13.0**
- **Backend**: Django 5.2 + Django REST Framework  
- **База данных**: PostgreSQL  
- **Формат данных**: YAML/JSON (для импорта прайсов)  
- **Документация API**: OpenAPI 3.0 через drf-spectacular
- **Дополнительные библиотеки**: psycopg2-binary, python-dotenv, PyYAML, requests
- **Линтер**: ruff

## Запуск проекта

### 1. Клонирование репозитория

`git clone https://github.com/4doring/diploma_python_developer.git`\
`cd название-вашего-репозитория`


### 2. Создание виртуального окружения

#### Linux / macOS (bash):
`python3 -m venv .venv`\
`source .venv/bin/activate`


#### Windows (powershell, cmd):
`python -m venv .venv`\
`.venv\Scripts\activate`


### 3. Установка зависимостей
`pip install -r requirements.txt`


### 4. Настройка переменных окружения

Создайте файл `.env` на основе `.env.example` в корне проекта и укажите ваши занчения переменных 

> Для работы с PostgreSQL убедитесь, что СУБД запущена и база данных создана.

### 5. Применение миграций
`python manage.py makemigrations`\
`python manage.py migrate`

### 6. Запуск сервера
`python manage.py runserver`

Сервер будет доступен по адресу: `http://127.0.0.1:8000`

## Пример HTTP-запроса к API регистрации пользователя 

Регистрирует нового пользователя (покупателя или магазин).  
После регистрации аккаунт неактивен — требуется подтверждение email.
> Поле `type` может быть `"buyer"` или `"shop"`.  
> Пароль должен соответствовать политике Django (`AUTH_PASSWORD_VALIDATORS`).  
> После успешной регистрации на email приходит токен подтверждения.

### HTTP:
```
POST /user/register
Host: localhost:8000
Content-Type: application/json

{
  "email": "buyer@example.com",
  "password": "SecurePass123!",
  "first_name": "Иван",
  "last_name": "Иванов",
  "company": "ООО 'Тест'",
  "position": "Менеджер",
  "type": "buyer"
}
```

#### bash:
```
curl -X POST http://localhost:8000/api/v1/user/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "buyer@example.com",
    "password": "SecurePass123!",
    "first_name": "Иван",
    "last_name": "Иванов",
    "company": "ООО Тест",
    "position": "Менеджер",
    "type": "buyer"
  }'
```

## Документация OpenAPI

Интерактивная документация по всем эндпоинтам (OpenAPI/Swagger) будет находиться по адресу:  
[http://127.0.0.1:8000/api/schema/swagger-ui/](http://127.0.0.1:8000/api/schema/swagger-ui/)

> По умолчанию проект запускается в режиме разработки (DEBUG=True). В этом режиме email-уведомления выводятся в консоль с помощью django.core.mail.backends.console.EmailBackend.
> Для отправки писем через SMTP (например, Gmail, Mail и т.п.) необходимо:
> - установить `DEBUG=False` в файле `.env`
> - указать корректные значения переменных `EMAIL_HOST, EMAIL_HOST_USER, EMAIL_HOST_PASSWORD` и других параметров SMTP в `.env.`

---
Домнин А.А.\
Дипломный проект профессии «Python-разработчик» от Нетология \
GitHub: [https://github.com/netology-code/python-final-diplom/tree/master]()
\
8.10.2025

